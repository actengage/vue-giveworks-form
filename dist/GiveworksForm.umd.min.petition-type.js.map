{"version":3,"sources":["webpack://GiveworksForm/./src/Components/Types/Petition.vue?4821","webpack://GiveworksForm/src/Components/Types/Petition.vue","webpack://GiveworksForm/./src/Components/Types/Petition.vue?832d","webpack://GiveworksForm/./src/Components/Types/Petition.vue","webpack://GiveworksForm/./src/Mixins/FormEvents.js","webpack://GiveworksForm/./src/Mixins/PageType.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","legends","form","errors","page","_e","options","directives","name","rawName","id","label","commentMessage","model","value","callback","$$v","$set","expression","size","type","orientation","block","activity","submitting","buttonLabel","site","config","giveworks","button","petition","optinMessage","custom","staticRenderFns","Petitionvue_type_script_lang_js_","extends","PageType","components","CheckboxField","Promise","all","__webpack_require__","e","then","bind","BtnActivity","TextareaField","ContactInfoFieldset","EmploymentInfoFieldset","Types_Petitionvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","vue_interface_src_Helpers_Functions__WEBPACK_IMPORTED_MODULE_0__","EVENTS","bindEvents","el","binding","vnode","context","subject","child","i","$on","args","method","camelCase","$emit","_Models_Page__WEBPACK_IMPORTED_MODULE_0__","_FormEvents__WEBPACK_IMPORTED_MODULE_1__","vue_interface_src_Helpers_Functions__WEBPACK_IMPORTED_MODULE_2__","props","source","String","Number","redirect","Boolean","httpOptions","required","mixins","FormEvents","computed","shouldShowEmployment","methods","submitButton","$refs","submit","$el","querySelector","hideSubmitButton","style","display","showSubmitButton","disableSubmitButton","disabled","enableSubmitButton","handleRedirect","url","setTimeout","external_reply","next_page","replace","window","location","success","failed","blur","resolve","reject","Error","save","assign","response","isFunction","data","onSubmitSuccess","onSubmitError","mounted","loaded","recurring","recurring_only","Page"],"mappings":"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","file":"GiveworksForm.umd.min.petition-type.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('contact-info-fieldset',{attrs:{\"legends\":false,\"form\":_vm.form,\"errors\":_vm.errors,\"page\":_vm.page}}),(_vm.shouldShowEmployment)?_c('employment-info-fieldset',{attrs:{\"legends\":false,\"form\":_vm.form,\"errors\":_vm.errors,\"page\":_vm.page}}):_vm._e(),(_vm.page.options.add_comment)?_c('textarea-field',{directives:[{name:\"autogrow\",rawName:\"v-autogrow\"}],attrs:{\"id\":\"comment\",\"label\":_vm.commentMessage},model:{value:(_vm.form.comment),callback:function ($$v) {_vm.$set(_vm.form, \"comment\", $$v)},expression:\"form.comment\"}}):_vm._e(),_c('btn-activity',{attrs:{\"size\":\"lg\",\"type\":\"submit\",\"orientation\":\"right\",\"block\":true,\"activity\":_vm.submitting,\"label\":_vm.buttonLabel || _vm.page.site.config.giveworks.button.petition}}),(_vm.page.options.add_optin)?_c('checkbox-field',{attrs:{\"label\":_vm.optinMessage,\"value\":\"1\",\"custom\":\"\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n    <div>\n        <contact-info-fieldset :legends=\"false\" :form=\"form\" :errors=\"errors\" :page=\"page\"/>\n\n        <employment-info-fieldset v-if=\"shouldShowEmployment\" :legends=\"false\" :form=\"form\" :errors=\"errors\" :page=\"page\"/>\n\n        <textarea-field v-if=\"page.options.add_comment\" v-autogrow v-model=\"form.comment\" id=\"comment\" :label=\"commentMessage\"/>\n\n        <btn-activity\n            size=\"lg\"\n            type=\"submit\"\n            orientation=\"right\"\n            :block=\"true\"\n            :activity=\"submitting\"\n            :label=\"buttonLabel || page.site.config.giveworks.button.petition\"\n        />\n\n        <checkbox-field v-if=\"page.options.add_optin\" :label=\"optinMessage\" value=\"1\" custom/>\n\n    </div>\n\n</template>\n\n<script>\nimport PageType from '../../Mixins/PageType';\n\nexport default {\n\n    name: 'page-type-petition',\n\n    extends: PageType,\n\n    components: {\n        CheckboxField: () => import(/* webpackChunkName: \"vue-interface\" */'vue-interface/src/Components/CheckboxField'),\n        BtnActivity: () => import(/* webpackChunkName: \"vue-interface\" */'vue-interface/src/Components/BtnActivity'),\n        TextareaField: () => import(/* webpackChunkName: \"vue-interface\" */'vue-interface/src/Components/TextareaField'),\n        ContactInfoFieldset: () => import(/* webpackChunkName: \"contact-info-fieldset\" */'../Fieldsets/ContactInfoFieldset'),\n        EmploymentInfoFieldset: () => import(/* webpackChunkName: \"employment-info-fieldset\" */'../Fieldsets/EmploymentInfoFieldset')\n    }\n\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Petition.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Petition.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Petition.vue?vue&type=template&id=907be180&\"\nimport script from \"./Petition.vue?vue&type=script&lang=js&\"\nexport * from \"./Petition.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { camelCase } from 'vue-interface/src/Helpers/Functions';\n\nconst EVENTS = [\n    'submit',\n    'redirect',\n    'submit-enable',\n    'submit-disable',\n    'submit-show',\n    'submit-hide'\n];\n\nexport default {\n\n    directives: {\n        bindEvents: {\n            bind(el, binding, vnode) {\n                const context = vnode.context;\n                const subject = vnode.child || vnode.context;\n\n                for(const i in EVENTS) {\n                    subject.$on(EVENTS[i], (...args) => {\n                        const method = camelCase('on-' + EVENTS[i]);\n\n                        if(subject !== context) {\n                            context.$emit(EVENTS[i], ...args);\n                        }\n\n                        if(context[method]) {\n                            context[method](...args);\n                        }\n                    });\n                }\n            }\n        }\n    }\n\n};\n","import Page from '../Models/Page';\nimport FormEvents from './FormEvents';\nimport { isFunction } from 'vue-interface/src/Helpers/Functions';\n\nexport default {\n\n    props: {\n\n        source: [String, Number],\n\n        redirect: [Boolean, String],\n\n        httpOptions: Object,\n\n        page: {\n            type: Object,\n            required: true\n        }\n\n    },\n\n    mixins: [\n        FormEvents\n    ],\n\n    computed: {\n\n        buttonLabel() {\n            return this.page.options.button;\n        },\n\n        shouldShowEmployment() {\n            return this.page.site.type === 'PAC' || this.page.site.type === 'Campaign';\n        }\n\n    },\n\n    methods: {\n\n        submitButton() {\n            return this.$refs.submit ? this.$refs.submit.$el : this.$el.querySelector('[type=submit]');\n        },\n\n        hideSubmitButton() {\n            this.submitButton().style.display = 'none';\n        },\n\n        showSubmitButton() {\n            this.submitButton().style.display = 'block';\n        },\n\n        disableSubmitButton() {\n            this.submitButton().disabled = true;\n        },\n\n        enableSubmitButton() {\n            this.submitButton().disabled = false;\n        },\n\n        handleRedirect(url) {\n            setTimeout(() => {\n                url = url || this.redirect || this.page.external_reply;\n                \n                if(!url && this.page.next_page) {\n                    url = this.page.next_page.url.replace(/\\/$/, '') + (\n                        this.form.source ? '/' + this.form.source : ''\n                    );\n                }\n                \n                if(url) {\n                    window.location = url;\n                }\n            });\n        },\n\n        submit(success, failed) {\n            if(this.$el.querySelector(':focus')) {\n                this.$el.querySelector(':focus').blur();\n            }\n\n            return new Promise((resolve, reject) => {\n                if(!this.submitting) {\n                    this.errors = {};\n                    this.submitting = true;\n                    this.$emit('submit');\n                    this.model.save(this.form, Object.assign({\n                        method: 'post'\n                    }, this.httpOptions))\n                        .then(response => {\n                            this.submitting = false;\n                            this.$emit('submit-complete', true, response);\n                            this.$emit('submit-success', response);\n\n                            if(isFunction(success)) {\n                                success(response);\n                            }\n\n                            resolve(response);\n                        }, response => {\n                            this.submitting = false;\n                            this.errors = response.data.errors;\n                            this.$emit('submit-complete', true, response);\n                            this.$emit('submit-success', response);\n\n                            if(isFunction(failed)) {\n                                failed(response);\n                            }\n\n                            reject(response);\n                        });\n                }\n                else {\n                    reject(new Error('The form is already submitting'));\n                }\n            });\n        },\n\n        onSubmitSuccess() {\n            this.handleRedirect();\n        },\n\n        onSubmitError(e) {\n            throw e;\n        }\n\n    },\n\n    mounted() {\n        this.loaded = true;\n    },\n\n    data() {\n        const recurring = this.page.site.recurring ? (\n            this.page.options.recurring_only ? 1 : 0\n        ) : 0;\n        \n        return {\n            form: {\n                source: this.source,\n                recurring: recurring\n            },\n            errors: {},\n            loaded: false,\n            submitting: false,\n            model: new Page({\n                id: this.page.id\n            })\n        };\n    }\n\n};\n"],"sourceRoot":""}